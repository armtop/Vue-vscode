{"version":3,"file":"index.js","sources":["../../src/calendar/template.tsx","../../src/calendar/calendar.tsx","../../src/calendar/index.ts"],"sourcesContent":["import { computed, watch, inject, ref, toRaw, defineComponent } from 'vue';\nimport { CloseIcon } from 'tdesign-icons-vue-next';\nimport TButton from '../button';\nimport config from '../config';\nimport Props from './template-props';\nimport { useTNodeJSX } from '../hooks/tnode';\nimport { TdCalendarProps, TDate, TDateType } from './type';\nimport { useConfig } from '../config-provider/useConfig';\n\nconst { prefix } = config;\nconst name = `${prefix}-calendar`;\n\nexport default defineComponent({\n  name,\n  components: {\n    TButton,\n  },\n  props: Props,\n  emits: ['visible-change'],\n  setup(_props, context) {\n    const renderTNodeJSX = useTNodeJSX();\n    const { t, globalConfig } = useConfig('calendar');\n\n    const props = inject('templateProps') as TdCalendarProps;\n    // 获取时间年月日起\n    const getYearMonthDay = (date: Date) => {\n      return {\n        year: date.getFullYear(),\n        month: date.getMonth(),\n        date: date.getDate(),\n      };\n    };\n    const usePopup = computed(() => props.usePopup);\n    const templateRef = ref(null);\n    const valueRef = ref(props.value);\n    const selectedDate = ref();\n    const firstDayOfWeek = computed(() => props.firstDayOfWeek || 0);\n    const days = computed(() => {\n      const raw = globalConfig.value.weekdays;\n      const ans = [];\n      let i = firstDayOfWeek.value % 7;\n\n      while (ans.length < 7) {\n        ans.push(raw[i]);\n        i = (i + 1) % 7;\n      }\n\n      return ans;\n    });\n    const today = new Date();\n    const minDate = computed(() => (props.minDate ? new Date(props.minDate) : today));\n    const maxDate = computed(() =>\n      props.maxDate ? new Date(props.maxDate) : new Date(today.getFullYear(), today.getMonth() + 6, today.getDate()),\n    );\n\n    // 获取日期\n    const getDate = (year: number, month: number, day: number) => new Date(year, month, day);\n\n    const confirmBtn = computed(() => {\n      if (typeof _props.confirmBtn === 'string') {\n        return { content: _props.confirmBtn || globalConfig.value.confirm };\n      }\n      return _props.confirmBtn;\n    });\n\n    // 选择日期\n    const handleSelect = (year: number, month: number, date: number, dateItem: TDate) => {\n      if (dateItem.type === 'disabled') return;\n      const selected = new Date(year, month, date);\n\n      if (props.type === 'range' && Array.isArray(selectedDate.value)) {\n        if (selectedDate.value.length === 1) {\n          if (selectedDate.value[0] > selected) {\n            selectedDate.value = [selected];\n          } else {\n            selectedDate.value = [selectedDate.value[0], selected];\n          }\n        } else {\n          selectedDate.value = [selected];\n          if (!confirmBtn.value && selectedDate.value.length === 2) {\n            props.onChange?.(selectedDate.value);\n          }\n        }\n      } else if (props.type === 'multiple') {\n        const newVal = [...selectedDate.value];\n        const index = selectedDate.value.findIndex((item: Date) => isSameDate(item, selected));\n        if (index > -1) {\n          newVal.splice(index, 1);\n        } else {\n          newVal.push(selected);\n        }\n        selectedDate.value = newVal;\n      } else {\n        selectedDate.value = selected;\n        if (!confirmBtn.value) {\n          props.onChange?.(selectedDate.value);\n        }\n      }\n      props.onSelect?.(toRaw(selectedDate.value));\n    };\n    // 确认\n    const handleConfirm = () => {\n      context.emit('visible-change');\n      props.onClose?.('confirm-btn');\n      props.onConfirm?.(toRaw(selectedDate.value));\n    };\n    const handleClose = () => {\n      context.emit('visible-change');\n      props.onClose?.('close-btn');\n    };\n\n    const getMonthDates = (date: Date) => {\n      const { year, month } = getYearMonthDay(date);\n      const firstDay = getDate(year, month, 1);\n      const weekdayOfFirstDay = firstDay.getDay();\n      const lastDate = new Date(+getDate(year, month + 1, 1) - 24 * 3600 * 1000).getDate();\n\n      return {\n        year,\n        month,\n        weekdayOfFirstDay,\n        lastDate,\n      };\n    };\n    type CompareDate = Date | number | { year: number; month: number; date: number };\n    const isSameDate = (date1: CompareDate, date2: CompareDate) => {\n      if (date1 instanceof Date) date1 = getYearMonthDay(date1);\n      if (date2 instanceof Date) date2 = getYearMonthDay(date2);\n      const keys = ['year', 'month', 'date'];\n      return keys.every((key) => date1[key] === date2[key]);\n    };\n\n    const months = computed(() => {\n      const ans = [];\n      let { year: minYear, month: minMonth } = getYearMonthDay(minDate.value);\n      const { year: maxYear, month: maxMonth } = getYearMonthDay(maxDate.value);\n      const calcType = (year: number, month: number, date: number): TDateType => {\n        const curDate = new Date(year, month, date, 23, 59, 59);\n\n        if (props.type === 'single') {\n          if (isSameDate({ year, month, date }, selectedDate.value)) return 'selected';\n        }\n        if (props.type === 'multiple') {\n          const hit = selectedDate.value.some((item: Date) => isSameDate({ year, month, date }, item));\n          if (hit) {\n            return 'selected';\n          }\n        }\n        if (props.type === 'range') {\n          if (Array.isArray(selectedDate.value)) {\n            const [startDate, endDate] = selectedDate.value;\n\n            if (startDate && isSameDate({ year, month, date }, startDate)) return 'start';\n            if (endDate && isSameDate({ year, month, date }, endDate)) return 'end';\n            if (\n              startDate &&\n              endDate &&\n              curDate.getTime() > startDate.getTime() &&\n              curDate.getTime() < endDate.getTime()\n            )\n              return 'centre';\n          }\n        }\n\n        const minCurDate = new Date(year, month, date, 0, 0, 0);\n        if (curDate.getTime() < minDate.value.getTime() || minCurDate.getTime() > maxDate.value.getTime()) {\n          return 'disabled';\n        }\n        return '';\n      };\n\n      while (minYear < maxYear || (minYear === maxYear && minMonth <= maxMonth)) {\n        const target = getMonthDates(getDate(minYear, minMonth, 1));\n        const months: TDate[] = [];\n        for (let i = 1; i <= 31; i++) {\n          if (i > target.lastDate) break;\n          const dateObj: TDate = {\n            date: getDate(minYear, minMonth, i),\n            day: i,\n            type: calcType(minYear, minMonth, i),\n          };\n          months.push(props.format ? props.format(dateObj) : dateObj);\n        }\n        ans.push({\n          year: minYear,\n          month: minMonth,\n          months,\n          weekdayOfFirstDay: target.weekdayOfFirstDay,\n        });\n        const curDate = getYearMonthDay(getDate(minYear, minMonth + 1, 1));\n        minYear = curDate.year;\n        minMonth = curDate.month;\n      }\n\n      return ans;\n    });\n\n    watch(\n      valueRef,\n      () => {\n        if (Array.isArray(valueRef.value)) {\n          selectedDate.value = valueRef.value.map((item) => new Date(item));\n        } else if (valueRef.value) {\n          selectedDate.value = new Date(valueRef.value);\n        } else {\n          selectedDate.value = props.type === 'multiple' ? [new Date()] : new Date();\n        }\n      },\n      { immediate: true },\n    );\n    context.expose({\n      valueRef,\n      templateRef,\n    });\n    const getDateItemClass = (dateItem: TDate) => {\n      let className = `${name}__dates-item`;\n      if (dateItem.type) {\n        className = `${className} ${name}__dates-item--${dateItem.type}`;\n      }\n      if (dateItem.className) {\n        className = `${className} ${dateItem.className}`;\n      }\n      return className;\n    };\n    return () => {\n      const renderCell = (dateItem: TDate) => {\n        const cell = renderTNodeJSX('cell', { params: { item: dateItem } });\n        if (cell) {\n          return cell;\n        }\n        let className = `${name}__dates-item-suffix`;\n        if (dateItem.type) {\n          className = `${className} ${name}__dates-item-suffix--${dateItem.type}`;\n        }\n        return (\n          <>\n            {dateItem.prefix && <div class={`${name}__dates-item-prefix`}>{dateItem.prefix}</div>}\n            {dateItem.day}\n            {dateItem.suffix && <div class={className}>{dateItem.suffix}</div>}\n          </>\n        );\n      };\n      const className = usePopup.value ? `${name} ${name}--popup` : `${name}`;\n\n      const renderConfirmBtn = () => {\n        if (confirmBtn.value && typeof confirmBtn.value !== 'object') {\n          return confirmBtn.value;\n        }\n        if (confirmBtn.value && Array.isArray(confirmBtn.value)) {\n          return confirmBtn.value;\n        }\n        if (confirmBtn.value && typeof confirmBtn.value === 'object') {\n          return <t-button block theme=\"primary\" {...confirmBtn.value} onClick={handleConfirm} />;\n        }\n      };\n\n      return (\n        <div ref={templateRef} class={className}>\n          <div class={`${name}__title`}>{_props.title || globalConfig.value.title}</div>\n          {usePopup.value && <CloseIcon class={`${name}__close-btn`} size=\"24\" onClick={handleClose}></CloseIcon>}\n          <div class={`${name}__days`}>\n            {(days.value || []).map((item, index) => (\n              <div key={index} class={`${name}__days-item`}>\n                {item}\n              </div>\n            ))}\n          </div>\n          <div class={`${name}__months`} style=\"overflow: auto\">\n            {months.value.map((item, index) => (\n              <>\n                <div class={`${name}__month`} key={index}>\n                  {t(globalConfig.value.monthTitle, { year: item.year, month: globalConfig.value.months[item.month] })}\n                </div>\n                <div class={`${name}__dates`} key={index}>\n                  {new Array((item.weekdayOfFirstDay - firstDayOfWeek.value + 7) % 7)\n                    .fill(0)\n                    .map((emptyItem, index) => (\n                      <div key={index} />\n                    ))}\n                  {item.months.map((dateItem, dateIndex) => (\n                    <>\n                      <div\n                        key={`${index}_${dateIndex}`}\n                        class={getDateItemClass(dateItem)}\n                        onClick={() => handleSelect(item.year, item.month, dateItem.day, dateItem)}\n                      >\n                        {renderCell(dateItem)}\n                      </div>\n                    </>\n                  ))}\n                </div>\n              </>\n            ))}\n          </div>\n          {usePopup.value && <div class=\"t-calendar__footer\">{renderConfirmBtn()}</div>}\n        </div>\n      );\n    };\n  },\n});\n","import { provide, watch, ref, reactive, nextTick, onMounted, defineComponent, toRefs } from 'vue';\nimport TPopup from '../popup';\nimport config from '../config';\nimport calendarProps from './props';\nimport { useTNodeJSX } from '../hooks/tnode';\nimport calendarTemplate from './template';\n\nconst { prefix } = config;\nconst name = `${prefix}-calendar`;\n\nexport default defineComponent({\n  name,\n  components: {\n    TPopup,\n    calendarTemplate,\n  },\n  props: calendarProps,\n  emits: ['update:visible'],\n  setup(props, context) {\n    const calendarTemplateRef = ref();\n    const renderTNodeJSX = useTNodeJSX();\n\n    provide('templateProps', reactive(props));\n    const selectedValueIntoView = () => {\n      const type = props.type === 'range' ? 'start' : 'selected';\n      const { templateRef } = calendarTemplateRef.value;\n      const scrollContainer = templateRef.querySelector(`.${name}__months`);\n      const selectedDate = templateRef.querySelector(`.${name}__dates-item--${type}`)?.parentNode\n        ?.previousElementSibling;\n      if (selectedDate) {\n        scrollContainer.scrollTop = selectedDate.offsetTop - scrollContainer.offsetTop;\n      }\n    };\n\n    const onVisibleChange = (v: boolean) => {\n      context.emit('update:visible', v);\n    };\n    const onPopupVisibleChange = (v: boolean) => {\n      if (!v) {\n        props.onClose?.('overlay');\n      } else {\n        nextTick(() => {\n          selectedValueIntoView();\n        });\n      }\n      context.emit('update:visible', v);\n    };\n\n    onMounted(() => {\n      if (!props.usePopup) selectedValueIntoView();\n    });\n\n    watch(\n      () => props.value,\n      (val) => {\n        calendarTemplateRef.value.valueRef = val;\n      },\n    );\n\n    return () => {\n      const title = renderTNodeJSX('title');\n      const confirmBtn = renderTNodeJSX('confirmBtn');\n      return (\n        <div>\n          {!props.usePopup ? (\n            <calendarTemplate ref={calendarTemplateRef} title={title} confirmBtn={confirmBtn}></calendarTemplate>\n          ) : (\n            <t-popup visible={props.visible} placement=\"bottom\" onVisibleChange={onPopupVisibleChange}>\n              <calendarTemplate\n                ref={calendarTemplateRef}\n                title={title}\n                confirmBtn={confirmBtn}\n                onVisibleChange={onVisibleChange}\n              ></calendarTemplate>\n            </t-popup>\n          )}\n        </div>\n      );\n    };\n  },\n});\n","import Calendar from './calendar';\nimport { withInstall, WithInstallType } from '../shared';\n\nimport './style';\nimport { TdCalendarProps } from './type';\n\nexport * from './type';\nexport type CalendarProps = TdCalendarProps;\n\nconst _Calendar: WithInstallType<typeof Calendar> = withInstall(Calendar);\nexport default _Calendar;\n"],"names":["prefix","config","name","defineComponent","components","TButton","props","Props","emits","setup","_props","context","renderTNodeJSX","useTNodeJSX","_useConfig","useConfig","t","globalConfig","inject","getYearMonthDay","date","year","getFullYear","month","getMonth","getDate","usePopup","computed","templateRef","ref","valueRef","value","selectedDate","firstDayOfWeek","days","raw","weekdays","ans","i","length","push","today","Date","minDate","maxDate","day","confirmBtn","content","confirm","handleSelect","dateItem","_props$onSelect","type","selected","Array","isArray","_props$onChange","onChange","call","newVal","_toConsumableArray","index","findIndex","item","isSameDate","splice","_props$onChange2","onSelect","toRaw","handleConfirm","_props$onClose","_props$onConfirm","emit","onClose","onConfirm","handleClose","_props$onClose2","getMonthDates","_getYearMonthDay","firstDay","weekdayOfFirstDay","getDay","lastDate","date1","date2","keys","every","key","months","_getYearMonthDay2","minYear","minMonth","_getYearMonthDay3","maxYear","maxMonth","calcType","curDate","hit","some","_selectedDate$value","_slicedToArray","startDate","endDate","getTime","minCurDate","target","dateObj","format","watch","map","immediate","expose","getDateItemClass","className","concat","renderCell","cell","params","_createVNode","_Fragment","suffix","renderConfirmBtn","_typeof","_resolveComponent","_mergeProps","title","CloseIcon","monthTitle","fill","emptyItem","dateIndex","onClick","TPopup","calendarTemplate","calendarProps","calendarTemplateRef","provide","reactive","selectedValueIntoView","_templateRef$querySel","scrollContainer","querySelector","parentNode","previousElementSibling","scrollTop","offsetTop","onVisibleChange","v","onPopupVisibleChange","nextTick","onMounted","val","visible","default","_default","_Calendar","withInstall","Calendar"],"mappings":"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"}