{"version":3,"file":"index.js","sources":["../../src/side-bar/side-bar.tsx","../../src/side-bar/side-bar-item.tsx","../../src/side-bar/index.ts"],"sourcesContent":["import { defineComponent, ref, Ref, ComponentInternalInstance, provide } from 'vue';\nimport config from '../config';\nimport props from './props';\nimport { TdSideBarProps } from './type';\nimport { useDefault } from '../shared';\nimport { useTNodeJSX } from '../hooks/tnode';\n\nconst { prefix } = config;\nconst name = `${prefix}-side-bar`;\n\nexport default defineComponent({\n  name,\n  props,\n  emits: ['update:value', 'update:modelValue', 'change'],\n  setup(props, context) {\n    const renderTNodeJSX = useTNodeJSX();\n    const [currentValue, setCurrentValue] = useDefault<TdSideBarProps['value'], TdSideBarProps>(\n      props,\n      context.emit,\n      'value',\n      'change',\n    );\n\n    const children: Ref<ComponentInternalInstance[]> = ref([]);\n\n    const relation = (child: ComponentInternalInstance) => {\n      child && children.value.push(child);\n    };\n\n    const removeRelation = (child: ComponentInternalInstance) => {\n      children.value = children.value.filter((item) => item !== child);\n    };\n\n    const onClickItem = (cur: string | number, label: string) => {\n      setCurrentValue(cur);\n      props.onClick?.(cur, label);\n    };\n\n    provide('sideBarProvide', {\n      ...props,\n      children,\n      currentValue,\n      relation,\n      removeRelation,\n      onClickItem,\n    });\n\n    return () => (\n      <div class={`${name}`}>\n        {renderTNodeJSX('default')}\n        <div class={`${name}__padding`}></div>\n      </div>\n    );\n  },\n});\n","import { defineComponent, getCurrentInstance, ComponentPublicInstance, computed, inject, onUnmounted } from 'vue';\nimport TBadge from '../badge';\nimport SideBarItemProps from './side-bar-item-props';\nimport { TdSideBarItemProps } from './type';\nimport { useTNodeJSX } from '../hooks/tnode';\n\nimport config from '../config';\n\nconst { prefix } = config;\nconst name = `${prefix}-side-bar-item`;\n\nexport default defineComponent({\n  name,\n  components: { TBadge },\n  props: SideBarItemProps,\n  setup(props) {\n    const renderTNodeJSX = useTNodeJSX();\n    const internalInstance = getCurrentInstance();\n    const proxy = internalInstance.proxy as ComponentPublicInstance<TdSideBarItemProps>;\n    const sideBarProvide: any = inject('sideBarProvide', undefined);\n    sideBarProvide.relation(proxy);\n\n    const isActive = computed(() => proxy.value === sideBarProvide.currentValue.value);\n\n    const rootClassName = computed(() => [\n      name,\n      { [`${name}--active`]: isActive.value },\n      { [`${name}--disabled`]: props.disabled },\n    ]);\n\n    const onClick = (e: MouseEvent) => {\n      sideBarProvide.onClickItem(proxy.value, props.label);\n    };\n\n    onUnmounted(() => {\n      sideBarProvide.removeRelation(proxy);\n    });\n\n    return () => {\n      const { badgeProps, label } = props;\n      const renderIconNode = () => {\n        const iconNode = renderTNodeJSX('icon');\n        if (!iconNode) {\n          return null;\n        }\n        return <div class={`${name}__icon`}>{iconNode}</div>;\n      };\n      return (\n        <div class={rootClassName.value} onClick={onClick}>\n          {isActive.value && (\n            <div>\n              <div class={`${name}__line`}></div>\n              <div class={`${name}__prefix`}></div>\n              <div class={`${name}__suffix`}></div>\n            </div>\n          )}\n          {renderIconNode()}\n          {badgeProps ? <t-badge {...badgeProps} content={label}></t-badge> : <div>{label}</div>}\n        </div>\n      );\n    };\n  },\n});\n","import _SideBar from './side-bar';\nimport _SideBarItem from './side-bar-item';\nimport { withInstall, WithInstallType } from '../shared';\nimport { TdSideBarProps, TdSideBarItemProps } from './type';\n\nimport './style';\n\nexport * from './type';\n\nexport type SideBarProps = TdSideBarProps;\nexport type SideBarItemProps = TdSideBarItemProps;\nexport const SideBar: WithInstallType<typeof _SideBar> = withInstall(_SideBar);\nexport const SideBarItem: WithInstallType<typeof _SideBarItem> = withInstall(_SideBarItem);\n"],"names":["prefix","config","name","defineComponent","props","emits","setup","context","renderTNodeJSX","useTNodeJSX","_useDefault","useDefault","emit","_useDefault2","_slicedToArray","currentValue","setCurrentValue","children","ref","relation","child","value","push","removeRelation","filter","item","onClickItem","cur","label","_props2$onClick","onClick","provide","_objectSpread","_createVNode","concat","components","TBadge","SideBarItemProps","internalInstance","getCurrentInstance","proxy","sideBarProvide","inject","isActive","computed","rootClassName","_defineProperty","disabled","e","onUnmounted","badgeProps","renderIconNode","iconNode","_resolveComponent","_mergeProps","SideBar","withInstall","_SideBar","SideBarItem","_SideBarItem"],"mappings":"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"}