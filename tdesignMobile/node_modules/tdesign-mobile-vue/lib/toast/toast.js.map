{"version":3,"file":"toast.js","sources":["../../src/toast/toast.vue","../../src/toast/toast.vue?vue&type=template&id=e58f378a&lang.js"],"sourcesContent":["<template>\n  <div>\n    <t-overlay v-bind=\"customOverlayProps\" />\n    <div :class=\"classes\" :style=\"{ top: placement === 'top' ? '25%' : placement === 'bottom' ? '75%' : '45%' }\">\n      <div v-if=\"iconContent\" :class=\"iconClasses\">\n        <t-node :content=\"iconContent\"></t-node>\n      </div>\n      <div v-if=\"messageContent\" :class=\"textClasses\">\n        <t-node :content=\"messageContent\"></t-node>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { LoadingIcon, CheckCircleIcon, CloseCircleIcon } from 'tdesign-icons-vue-next';\nimport { computed, toRefs, ref, defineComponent, getCurrentInstance, h, onUnmounted } from 'vue';\nimport { renderTNode, TNode } from '../shared';\nimport TOverlay from '../overlay';\nimport ToastProps from './props';\nimport config from '../config';\n\nconst { prefix } = config;\nconst name = `${prefix}-toast`;\nconst bodyLockClass = `${name}-overflow-hidden`;\n\nexport default defineComponent({\n  name,\n  components: { TOverlay, TNode },\n  props: ToastProps,\n  setup(props) {\n    const toastTypeIcon = {\n      loading: LoadingIcon,\n      success: CheckCircleIcon,\n      error: CloseCircleIcon,\n    };\n    // 获取当前实例-单例\n    const internalInstance = getCurrentInstance();\n    // 内容渲染\n    const messageContent = computed(() => renderTNode(internalInstance, 'message'));\n    // 图标渲染\n    const iconContent = computed(() => {\n      let iconNode = renderTNode(internalInstance, 'icon');\n      if (iconNode === undefined && props.theme) {\n        iconNode = h(toastTypeIcon[props.theme]);\n      }\n      return iconNode;\n    });\n\n    const classes = computed(() => [\n      `${name}`,\n      `${name}__content`,\n      `${name}__icon`,\n      {\n        [`${name}--${props.direction}`]: props.direction,\n        [`${name}__content--${props.direction}`]: props.direction,\n        [`${name}--loading`]: props.theme === 'loading',\n      },\n    ]);\n\n    const textClasses = computed(() => [\n      {\n        [`${name}__text`]: !iconContent.value,\n        [`${name}__text--${props.direction}`]: props.direction,\n      },\n    ]);\n\n    const iconClasses = computed(() => [\n      {\n        [`${name}__icon--${props.direction}`]: props.direction,\n      },\n    ]);\n\n    const lock = () => {\n      document.body.classList.add(bodyLockClass);\n    };\n\n    const unlock = () => {\n      document.body.classList.remove(bodyLockClass);\n    };\n\n    const customOverlayProps = computed(() => {\n      const toastOverlayProps = {\n        preventScrollThrough: props.preventScrollThrough,\n        visible: props.showOverlay,\n      };\n      props.preventScrollThrough ? lock() : unlock();\n      return {\n        ...props.overlayProps,\n        ...toastOverlayProps,\n      };\n    });\n\n    onUnmounted(() => {\n      unlock();\n    });\n\n    return {\n      name: ref(name),\n      classes,\n      textClasses,\n      iconClasses,\n      iconContent,\n      messageContent,\n      customOverlayProps,\n      ...toRefs(props),\n    };\n  },\n});\n</script>\n","<template>\n  <div>\n    <t-overlay v-bind=\"customOverlayProps\" />\n    <div :class=\"classes\" :style=\"{ top: placement === 'top' ? '25%' : placement === 'bottom' ? '75%' : '45%' }\">\n      <div v-if=\"iconContent\" :class=\"iconClasses\">\n        <t-node :content=\"iconContent\"></t-node>\n      </div>\n      <div v-if=\"messageContent\" :class=\"textClasses\">\n        <t-node :content=\"messageContent\"></t-node>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { LoadingIcon, CheckCircleIcon, CloseCircleIcon } from 'tdesign-icons-vue-next';\nimport { computed, toRefs, ref, defineComponent, getCurrentInstance, h, onUnmounted } from 'vue';\nimport { renderTNode, TNode } from '../shared';\nimport TOverlay from '../overlay';\nimport ToastProps from './props';\nimport config from '../config';\n\nconst { prefix } = config;\nconst name = `${prefix}-toast`;\nconst bodyLockClass = `${name}-overflow-hidden`;\n\nexport default defineComponent({\n  name,\n  components: { TOverlay, TNode },\n  props: ToastProps,\n  setup(props) {\n    const toastTypeIcon = {\n      loading: LoadingIcon,\n      success: CheckCircleIcon,\n      error: CloseCircleIcon,\n    };\n    // 获取当前实例-单例\n    const internalInstance = getCurrentInstance();\n    // 内容渲染\n    const messageContent = computed(() => renderTNode(internalInstance, 'message'));\n    // 图标渲染\n    const iconContent = computed(() => {\n      let iconNode = renderTNode(internalInstance, 'icon');\n      if (iconNode === undefined && props.theme) {\n        iconNode = h(toastTypeIcon[props.theme]);\n      }\n      return iconNode;\n    });\n\n    const classes = computed(() => [\n      `${name}`,\n      `${name}__content`,\n      `${name}__icon`,\n      {\n        [`${name}--${props.direction}`]: props.direction,\n        [`${name}__content--${props.direction}`]: props.direction,\n        [`${name}--loading`]: props.theme === 'loading',\n      },\n    ]);\n\n    const textClasses = computed(() => [\n      {\n        [`${name}__text`]: !iconContent.value,\n        [`${name}__text--${props.direction}`]: props.direction,\n      },\n    ]);\n\n    const iconClasses = computed(() => [\n      {\n        [`${name}__icon--${props.direction}`]: props.direction,\n      },\n    ]);\n\n    const lock = () => {\n      document.body.classList.add(bodyLockClass);\n    };\n\n    const unlock = () => {\n      document.body.classList.remove(bodyLockClass);\n    };\n\n    const customOverlayProps = computed(() => {\n      const toastOverlayProps = {\n        preventScrollThrough: props.preventScrollThrough,\n        visible: props.showOverlay,\n      };\n      props.preventScrollThrough ? lock() : unlock();\n      return {\n        ...props.overlayProps,\n        ...toastOverlayProps,\n      };\n    });\n\n    onUnmounted(() => {\n      unlock();\n    });\n\n    return {\n      name: ref(name),\n      classes,\n      textClasses,\n      iconClasses,\n      iconContent,\n      messageContent,\n      customOverlayProps,\n      ...toRefs(props),\n    };\n  },\n});\n</script>\n"],"names":["prefix","config","name","bodyLockClass","defineComponent","components","TOverlay","TNode","props","ToastProps","setup","toastTypeIcon","loading","LoadingIcon","success","CheckCircleIcon","error","CloseCircleIcon","internalInstance","getCurrentInstance","messageContent","computed","renderTNode","iconContent","iconNode","theme","h","classes","concat","_defineProperty","direction","textClasses","value","iconClasses","lock","document","body","classList","add","unlock","remove","customOverlayProps","toastOverlayProps","preventScrollThrough","visible","showOverlay","_objectSpread","overlayProps","onUnmounted","ref","toRefs","_createElementBlock","_createVNode","_component_t_overlay","_ctx","_createElementVNode","class","style","_normalizeStyle","top","placement","_component_t_node","content"],"mappings":"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"}