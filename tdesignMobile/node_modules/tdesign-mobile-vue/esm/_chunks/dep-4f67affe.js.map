{"version":3,"file":"dep-4f67affe.js","sources":["../../src/drawer/drawer.tsx","../../src/drawer/plugin.ts"],"sourcesContent":["import { ref, watch, toRefs, defineComponent, h } from 'vue';\nimport TPopup from '../popup';\nimport config from '../config';\nimport props from './props';\nimport { DrawerItem } from './type';\nimport { useTNodeJSX } from '../hooks/tnode';\nimport { usePrefixClass } from '../hooks/useClass';\n\nconst { prefix } = config;\nconst name = `${prefix}-drawer`;\n\nexport default defineComponent({\n  name,\n  components: { TPopup },\n  props,\n  emits: ['update:visible', 'itemClick', 'overlayClick'],\n  setup(props, context) {\n    const renderTNodeJSX = useTNodeJSX();\n    const drawerClass = usePrefixClass('drawer');\n    const { visible, showOverlay } = toRefs(props);\n    const open = ref(visible.value || false);\n\n    watch(open, () => {\n      context.emit('update:visible', open.value);\n    });\n\n    watch(visible, () => {\n      open.value = visible.value;\n    });\n\n    const onItemClick = (index: number, item: DrawerItem, context: { e: MouseEvent }) => {\n      props.onItemClick?.(index, item, context);\n    };\n\n    const onVisibleChange = (visible: boolean) => {\n      if (showOverlay.value) {\n        props.onOverlayClick?.({ visible });\n      }\n    };\n\n    const onClose = () => {\n      props.onClose?.('overlay');\n    };\n\n    return () => {\n      const { attach, zIndex, closeOnOverlayClick, destroyOnClose, items, placement, showOverlay } = props;\n      const renderTitleNode = () => {\n        const titleNode = renderTNodeJSX('title');\n        if (!titleNode) {\n          return null;\n        }\n        return <div class={`${drawerClass.value}__title`}>{titleNode}</div>;\n      };\n      const renderFooterNode = () => {\n        const footerNode = renderTNodeJSX('footer');\n        if (!footerNode) {\n          return null;\n        }\n        return <div class={`${drawerClass.value}__footer`}>{footerNode}</div>;\n      };\n      return (\n        <t-popup\n          v-model={open.value}\n          placement={placement}\n          attach={attach}\n          showOverlay={showOverlay}\n          zIndex={zIndex}\n          closeOnOverlayClick={closeOnOverlayClick}\n          destroyOnClose={destroyOnClose}\n          onVisibleChange={onVisibleChange}\n          onClose={onClose}\n        >\n          <div class={`${drawerClass.value}`}>\n            {renderTitleNode()}\n            {renderTNodeJSX('default')}\n\n            <div class={`${drawerClass.value}__sidebar`}>\n              {(items || []).map((item, index) => (\n                <div\n                  key={item.title}\n                  class={`${drawerClass.value}__sidebar-item`}\n                  onClick={(e) => onItemClick(index, item, { e })}\n                >\n                  {item.icon && <span class={`${drawerClass.value}__sidebar-item-icon`}>{item.icon(h)}</span>}\n                  <div class={`${drawerClass.value}__sidebar-item-title`}>{item.title}</div>\n                </div>\n              ))}\n            </div>\n\n            {renderFooterNode()}\n          </div>\n        </t-popup>\n      );\n    };\n  },\n});\n","import { createApp, App, h, ref, nextTick } from 'vue';\nimport vueDrawer from './drawer';\nimport { WithInstallType, isBrowser } from '../shared';\nimport { TdDrawerProps } from './type';\n\ntype DrawerOptions = Omit<TdDrawerProps, 'attach'>;\n\nconst Drawer = (options: DrawerOptions) => {\n  if (!isBrowser) return;\n  const root = document.createElement('div');\n  document.body.appendChild(root);\n  const visible = ref(false);\n  const props = ref({});\n  const destroyOnClose = ref(false);\n\n  createApp(() =>\n    h(vueDrawer, { ...options, visible: visible.value, destroyOnClose: destroyOnClose.value, ...props.value }),\n  ).mount(root);\n\n  const handler = {\n    destroy() {\n      destroyOnClose.value = true;\n      nextTick(() => {\n        visible.value = false;\n        document.body.removeChild(root);\n      });\n    },\n    hide() {\n      visible.value = false;\n    },\n    show() {\n      visible.value = true;\n    },\n    update(options: DrawerOptions) {\n      props.value = options;\n    },\n  };\n\n  return handler;\n};\n\nDrawer.install = (app: App): void => {\n  // 添加插件入口\n  app.config.globalProperties.$drawer = Drawer;\n};\n\nconst DrawerPlugin: WithInstallType<typeof Drawer> = Drawer;\n\nexport default DrawerPlugin;\n"],"names":["prefix","config","name","defineComponent","components","TPopup","props","emits","setup","context","renderTNodeJSX","useTNodeJSX","drawerClass","usePrefixClass","_toRefs","toRefs","visible","showOverlay","open","ref","value","watch","emit","onItemClick","index","item","_props2$onItemClick","onVisibleChange","_props2$onOverlayClic","onOverlayClick","onClose","_props2$onClose","attach","zIndex","closeOnOverlayClick","destroyOnClose","items","placement","renderTitleNode","titleNode","_createVNode","concat","renderFooterNode","footerNode","_resolveComponent","onUpdateModelValue","$event","default","_default","map","title","onClick","e","icon","h","Drawer","options","isBrowser","root","document","createElement","body","appendChild","createApp","vueDrawer","_objectSpread","mount","handler","destroy","nextTick","removeChild","hide","show","update","install","app","globalProperties","$drawer","DrawerPlugin"],"mappings":"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"}