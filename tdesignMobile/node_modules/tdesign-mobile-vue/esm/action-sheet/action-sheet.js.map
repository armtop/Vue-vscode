{"version":3,"file":"action-sheet.js","sources":["../../src/action-sheet/action-sheet.vue","../../src/action-sheet/action-sheet.vue?vue&type=template&id=215efc74&lang.js"],"sourcesContent":["<template>\n  <t-popup :visible=\"currentVisible\" :placement=\"`bottom`\" :destroy-on-close=\"true\" :class=\"name\" @close=\"handleClose\">\n    <div :class=\"rootClasses\">\n      <p v-if=\"description\" :class=\"descriptionClasses\">{{ description }}</p>\n      <action-sheet-list v-if=\"theme === 'list'\" :align=\"align\" :items=\"actionItems\" @selected=\"handleSelected\" />\n      <action-sheet-grid v-if=\"theme === 'grid'\" :items=\"actionItems\" :count=\"count\" @selected=\"handleSelected\" />\n      <template v-if=\"showCancel\">\n        <div :class=\"`${name}__footer`\">\n          <div :class=\"`${name}__gap-${theme}`\"></div>\n          <t-button :class=\"`${name}__cancel`\" variant=\"text\" block @click=\"handleCancel\">\n            {{ cancelText || globalConfig.cancel }}\n          </t-button>\n        </div>\n      </template>\n    </div>\n  </t-popup>\n</template>\n\n<script lang=\"ts\">\nimport { ref, watch, defineComponent, computed } from 'vue';\nimport { useDefault } from '../shared';\nimport ActionSheetList from './action-sheet-list.vue';\nimport ActionSheetGrid from './action-sheet-grid.vue';\nimport TPopup from '../popup';\nimport TButton from '../button';\nimport config from '../config';\nimport { TdActionSheetProps, ActionSheetItem } from './type';\nimport ActionSheetProps from './props';\nimport { useConfig } from '../config-provider/useConfig';\n\nconst { prefix } = config;\nconst name = `${prefix}-action-sheet`;\n\nexport default defineComponent({\n  name,\n  components: {\n    TPopup,\n    TButton,\n    ActionSheetList,\n    ActionSheetGrid,\n  },\n  props: ActionSheetProps,\n  emits: ['selected', 'update:modelValue', 'cancel', 'close', 'update:visible'],\n  setup(props: any, context) {\n    const { globalConfig } = useConfig('actionSheet');\n\n    const actionItems = computed(() => {\n      return props.items.map((item: String | ActionSheetItem) => {\n        if (typeof item === 'string') {\n          return {\n            label: item,\n          };\n        }\n        return item;\n      });\n    });\n    const [currentVisible] = useDefault<TdActionSheetProps['visible'], TdActionSheetProps>(\n      props,\n      context.emit,\n      'visible',\n      'visible-change',\n    );\n    const rootClasses = computed(() => ({\n      [`${name}__content`]: true,\n    }));\n    const descriptionClasses = computed(() => ({\n      [`${name}__description`]: true,\n      [`${name}__description--left`]: props.align === 'left',\n      [`${name}__description--grid`]: props.theme === 'grid',\n    }));\n    watch(\n      () => currentVisible.value,\n      (val) => {\n        currentVisible.value = val;\n      },\n      {\n        immediate: true,\n        deep: true,\n      },\n    );\n\n    const hide = (trigger: string) => {\n      context.emit('update:modelValue', false);\n      props.onClose?.({ trigger });\n    };\n\n    const handleCancel = () => {\n      props.onCancel?.();\n      context.emit('update:modelValue', false);\n    };\n\n    const handleSelected = (index: number) => {\n      props.onSelected?.(props?.items[index], index);\n      hide('selected');\n    };\n\n    const handleClose = () => {\n      hide('overlay');\n    };\n\n    return {\n      prefix,\n      name: ref(name),\n      globalConfig,\n      rootClasses,\n      descriptionClasses,\n      actionItems,\n      currentVisible,\n      handleCancel,\n      handleSelected,\n      handleClose,\n    };\n  },\n});\n</script>\n","<template>\n  <t-popup :visible=\"currentVisible\" :placement=\"`bottom`\" :destroy-on-close=\"true\" :class=\"name\" @close=\"handleClose\">\n    <div :class=\"rootClasses\">\n      <p v-if=\"description\" :class=\"descriptionClasses\">{{ description }}</p>\n      <action-sheet-list v-if=\"theme === 'list'\" :align=\"align\" :items=\"actionItems\" @selected=\"handleSelected\" />\n      <action-sheet-grid v-if=\"theme === 'grid'\" :items=\"actionItems\" :count=\"count\" @selected=\"handleSelected\" />\n      <template v-if=\"showCancel\">\n        <div :class=\"`${name}__footer`\">\n          <div :class=\"`${name}__gap-${theme}`\"></div>\n          <t-button :class=\"`${name}__cancel`\" variant=\"text\" block @click=\"handleCancel\">\n            {{ cancelText || globalConfig.cancel }}\n          </t-button>\n        </div>\n      </template>\n    </div>\n  </t-popup>\n</template>\n\n<script lang=\"ts\">\nimport { ref, watch, defineComponent, computed } from 'vue';\nimport { useDefault } from '../shared';\nimport ActionSheetList from './action-sheet-list.vue';\nimport ActionSheetGrid from './action-sheet-grid.vue';\nimport TPopup from '../popup';\nimport TButton from '../button';\nimport config from '../config';\nimport { TdActionSheetProps, ActionSheetItem } from './type';\nimport ActionSheetProps from './props';\nimport { useConfig } from '../config-provider/useConfig';\n\nconst { prefix } = config;\nconst name = `${prefix}-action-sheet`;\n\nexport default defineComponent({\n  name,\n  components: {\n    TPopup,\n    TButton,\n    ActionSheetList,\n    ActionSheetGrid,\n  },\n  props: ActionSheetProps,\n  emits: ['selected', 'update:modelValue', 'cancel', 'close', 'update:visible'],\n  setup(props: any, context) {\n    const { globalConfig } = useConfig('actionSheet');\n\n    const actionItems = computed(() => {\n      return props.items.map((item: String | ActionSheetItem) => {\n        if (typeof item === 'string') {\n          return {\n            label: item,\n          };\n        }\n        return item;\n      });\n    });\n    const [currentVisible] = useDefault<TdActionSheetProps['visible'], TdActionSheetProps>(\n      props,\n      context.emit,\n      'visible',\n      'visible-change',\n    );\n    const rootClasses = computed(() => ({\n      [`${name}__content`]: true,\n    }));\n    const descriptionClasses = computed(() => ({\n      [`${name}__description`]: true,\n      [`${name}__description--left`]: props.align === 'left',\n      [`${name}__description--grid`]: props.theme === 'grid',\n    }));\n    watch(\n      () => currentVisible.value,\n      (val) => {\n        currentVisible.value = val;\n      },\n      {\n        immediate: true,\n        deep: true,\n      },\n    );\n\n    const hide = (trigger: string) => {\n      context.emit('update:modelValue', false);\n      props.onClose?.({ trigger });\n    };\n\n    const handleCancel = () => {\n      props.onCancel?.();\n      context.emit('update:modelValue', false);\n    };\n\n    const handleSelected = (index: number) => {\n      props.onSelected?.(props?.items[index], index);\n      hide('selected');\n    };\n\n    const handleClose = () => {\n      hide('overlay');\n    };\n\n    return {\n      prefix,\n      name: ref(name),\n      globalConfig,\n      rootClasses,\n      descriptionClasses,\n      actionItems,\n      currentVisible,\n      handleCancel,\n      handleSelected,\n      handleClose,\n    };\n  },\n});\n</script>\n"],"names":["prefix","config","name","defineComponent","components","TPopup","TButton","ActionSheetList","ActionSheetGrid","props","ActionSheetProps","emits","setup","context","_useConfig","useConfig","globalConfig","actionItems","computed","items","map","item","label","_useDefault","useDefault","emit","_useDefault2","_slicedToArray","currentVisible","rootClasses","_defineProperty","concat","descriptionClasses","align","theme","watch","value","val","immediate","deep","hide","trigger","_props$onClose","onClose","call","handleCancel","_props$onCancel","onCancel","handleSelected","index","_props$onSelected","onSelected","handleClose","ref","_createBlock","_component_t_popup","visible","_ctx","placement","class","_createElementVNode","description","_createElementBlock","_component_action_sheet_list","_component_action_sheet_grid","count","showCancel","_normalizeClass","_createVNode","_component_t_button","variant","block","onClick","cancelText","cancel"],"mappings":"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"}