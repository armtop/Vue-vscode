{"version":3,"file":"index.js","sources":["../../src/dialog/dialog.tsx","../../src/dialog/index.ts"],"sourcesContent":["import { CloseIcon } from 'tdesign-icons-vue-next';\nimport { computed, defineComponent } from 'vue';\nimport get from 'lodash/get';\nimport isString from 'lodash/isString';\n\nimport TButton, { ButtonProps } from '../button';\nimport TPopup from '../popup';\nimport config from '../config';\nimport props from './props';\nimport { useTNodeJSX, useContent } from '../hooks/tnode';\n\nconst { prefix } = config;\nconst name = `${prefix}-dialog`;\n\nexport default defineComponent({\n  name,\n  components: { TPopup, TButton, CloseIcon },\n  props,\n  emits: ['update:visible', 'confirm', 'overlay-click', 'cancel', 'close', 'closed'],\n  setup(props, context) {\n    const renderTNodeJSX = useTNodeJSX();\n    const renderContent = useContent();\n    const isTextStyleBtn = computed(() =>\n      [props?.confirmBtn, props?.cancelBtn, ...(props?.actions || [])].some((item) => get(item, 'variant') === 'text'),\n    );\n\n    const footerClass = computed(() => [\n      `${name}__footer`,\n      {\n        [`${name}__footer--column`]: props.buttonLayout === 'vertical',\n        [`${name}__footer--full`]: isTextStyleBtn.value && get(props.actions, 'length', 0) === 0,\n      },\n    ]);\n\n    const buttonClass = computed(() => [\n      `${name}__button`,\n      {\n        [`${name}__button--${props.buttonLayout}`]: !isTextStyleBtn.value,\n        [`${name}__button--text`]: isTextStyleBtn.value,\n      },\n    ]);\n\n    const rootStyles = computed(() => ({\n      width: isString(props.width) ? props.width : `${props.width}px`,\n    }));\n\n    const handleClose = (args: { e: MouseEvent }) => {\n      const { e } = args;\n      context.emit('update:visible', false);\n      context.emit('close', { e, trigger: 'close-btn' });\n    };\n\n    const handleClosed = () => {\n      context.emit('closed');\n    };\n\n    const handleConfirm = (e: MouseEvent) => {\n      context.emit('update:visible', false);\n      context.emit?.('confirm', { e });\n    };\n\n    const handleCancel = (e: MouseEvent) => {\n      context.emit('update:visible', false);\n      context.emit('close', { e, trigger: 'cancel' });\n      context.emit('cancel', { e });\n    };\n\n    const handleOverlayClick = (args: { e: MouseEvent }) => {\n      const { e } = args;\n      if (!props.closeOnOverlayClick) {\n        return;\n      }\n      context.emit('update:visible', false);\n      context.emit('close', { e, trigger: 'overlay' });\n      context.emit('overlay-click', { e });\n    };\n\n    const calcBtn = (btn: any) => (isString(btn) ? { content: btn } : btn);\n    const confirmBtnProps = computed(() => ({\n      theme: 'primary',\n      ...calcBtn(props.confirmBtn),\n    }));\n    const cancelBtnProps = computed<ButtonProps>(() => ({\n      theme: isTextStyleBtn.value ? 'default' : 'light',\n      ...calcBtn(props.cancelBtn),\n    }));\n    const actionsBtnProps = computed(() => props.actions?.map((item) => calcBtn(item)));\n\n    return () => {\n      const { visible, showOverlay, overlayProps, preventScrollThrough, destroyOnClose, zIndex, closeBtn, actions } =\n        props;\n      const renderTitleNode = () => {\n        const titleNode = renderTNodeJSX('title');\n        if (!titleNode) {\n          return null;\n        }\n\n        return <div class={`${name}__header`}>{titleNode}</div>;\n      };\n      const renderContentNode = () => {\n        const contentNode = renderContent('default', 'content');\n        if (!contentNode) {\n          return null;\n        }\n        return (\n          <div class={`${name}__body`}>\n            <div class={`${name}__body-text`}>{contentNode}</div>\n          </div>\n        );\n      };\n      const renderActionsNode = () => {\n        const actionsNode = renderTNodeJSX('actions');\n        if (actionsNode && actionsBtnProps.value) {\n          return actionsBtnProps.value.map((item, index) => (\n            <t-button key={index} {...item} class={buttonClass.value} onClick={handleCancel} />\n          ));\n        }\n        return null;\n      };\n      const renderCancelBtnNode = () => {\n        const cancelBtnNode = renderTNodeJSX('cancelBtn');\n        if (!actions && cancelBtnNode) {\n          return <t-button {...cancelBtnProps.value} class={buttonClass.value} onClick={handleCancel} />;\n        }\n        return null;\n      };\n\n      const renderConfirmBntNode = () => {\n        const confirmBtnNode = renderTNodeJSX('confirmBtn');\n        if (!actions && confirmBtnNode) {\n          return <t-button {...confirmBtnProps.value} class={buttonClass.value} onClick={handleConfirm} />;\n        }\n        return null;\n      };\n      return (\n        <t-popup\n          visible={visible}\n          placement=\"center\"\n          show-overlay={showOverlay}\n          overlay-props={overlayProps}\n          prevent-scroll-through={preventScrollThrough}\n          destroy-on-close={destroyOnClose}\n          z-index={zIndex}\n          onClose={handleOverlayClick}\n          onClosed={handleClosed}\n        >\n          <div class={`${name} ${context.attrs.class || ''}`} style={rootStyles.value}>\n            {renderTNodeJSX('top')}\n            {closeBtn && (\n              <div class={`${name}__close-btn`}>\n                <close-icon onClick={handleClose} />\n              </div>\n            )}\n            <div class={`${name}__content`}>\n              {renderTitleNode()}\n              {renderContentNode()}\n            </div>\n            {renderTNodeJSX('middle')}\n            <div class={footerClass.value}>\n              {renderActionsNode()}\n              {renderCancelBtnNode()}\n              {renderConfirmBntNode()}\n            </div>\n          </div>\n        </t-popup>\n      );\n    };\n  },\n});\n","import { createApp, h, App, ref, nextTick, reactive } from 'vue';\n\nimport Dialog from './dialog';\nimport { WithInstallType, isBrowser } from '../shared';\nimport { DialogCloseContext, TdDialogProps, DialogInstance } from './type';\n\nimport './style';\n\nexport type DialogType = 'alert' | 'confirm' | 'show';\n\nexport const DialogPropsDefault = {\n  title: '',\n  content: '',\n  confirmBtn: '',\n  cancelBtn: '',\n  visible: false,\n  zIndex: 2500,\n  showOverlay: true,\n  width: '320px',\n  closeOnOverlayClick: false,\n};\n\nconst propsFn = ['onConfirm', 'onCancel', 'onOverlayClick', 'onClose', 'onClosed'] as const;\ntype DialogPropsFnName = (typeof propsFn)[number];\n\nfunction create(options: Partial<TdDialogProps> | string): DialogInstance {\n  if (!isBrowser) return;\n\n  const root = document.createElement('div');\n  document.body.appendChild(root);\n\n  const props = ref<Partial<TdDialogProps>>({});\n  const propsObject = {\n    ...DialogPropsDefault,\n    ...(typeof options === 'string' ? { content: options } : options),\n  };\n\n  function callFn<T>(fnType: DialogPropsFnName, context?: T): void {\n    const fn = props.value[fnType] || propsObject[fnType];\n    typeof fn === 'function' && fn(context as any);\n  }\n\n  const params = reactive({\n    ...propsObject,\n    onConfirm: (context: { e: MouseEvent }) => {\n      callFn('onConfirm', context);\n      params.visible = false;\n    },\n    onCancel: (context: { e: MouseEvent }) => {\n      callFn('onCancel', context);\n      params.visible = false;\n    },\n    onOverlayClick: (context: { e: MouseEvent }) => {\n      callFn('onOverlayClick', context);\n      params.visible = false;\n    },\n    onClose: (context: DialogCloseContext) => {\n      callFn('onClose', context);\n      root.remove();\n    },\n    onClosed: () => {\n      callFn('onClosed');\n      // 卸载创建的app\n      params.destroyOnClose && app.unmount();\n    },\n  });\n\n  const app = createApp(() => h(Dialog, params));\n  app.mount(root);\n\n  const handler = {\n    destroy() {\n      params.destroyOnClose = true;\n      nextTick(() => {\n        params.visible = false;\n        root.remove();\n      });\n    },\n    hide() {\n      params.visible = false;\n    },\n    show() {\n      params.visible = true;\n    },\n    update(options: Partial<TdDialogProps> | string) {\n      if (typeof options === 'string') {\n        params.content = options;\n      } else {\n        for (const key in options) {\n          if (propsFn.includes(key as DialogPropsFnName)) {\n            props.value[key] = options[key];\n          } else {\n            params[key] = options[key];\n          }\n        }\n      }\n    },\n  };\n\n  nextTick(() => (params.visible = true));\n\n  return handler;\n}\n\n(['show', 'alert', 'confirm'] as DialogType[]).forEach((type: DialogType): void => {\n  Dialog[type] = (options: Partial<TdDialogProps> | string): DialogInstance => {\n    let props: any = { content: '' };\n\n    if (typeof options === 'string') {\n      props.content = options;\n    } else {\n      props = { ...props, ...options };\n    }\n\n    if (type === 'alert') {\n      props.cancelBtn = null;\n    }\n\n    return create(props);\n  };\n});\n\nDialog.install = (app: App, name = '') => {\n  app.component(name || Dialog.name, Dialog);\n\n  // 添加插件入口\n  app.config.globalProperties.$dialog = Dialog as any;\n  app.provide('$dialog', Dialog);\n};\n\ntype DialogApi = {\n  /** 通用对话框 */\n  show: (options: Partial<TdDialogProps> | string) => DialogInstance;\n  /** 基础对话框 */\n  alert: (options: Partial<TdDialogProps> | string) => DialogInstance;\n  /** 选择对话框 */\n  confirm: (options: Partial<TdDialogProps> | string) => DialogInstance;\n};\n\nexport const DialogPlugin: WithInstallType<typeof Dialog> & DialogApi = Dialog as any;\nexport default DialogPlugin;\n\ndeclare module '@vue/runtime-core' {\n  // Bind to `this` keyword\n  export interface ComponentCustomProperties {\n    $dialog: DialogApi;\n  }\n}\n"],"names":["prefix","config","name","defineComponent","components","TPopup","TButton","CloseIcon","props","emits","setup","context","renderTNodeJSX","useTNodeJSX","renderContent","useContent","isTextStyleBtn","computed","confirmBtn","cancelBtn","concat","_toConsumableArray","actions","some","item","get","footerClass","_defineProperty","buttonLayout","value","buttonClass","rootStyles","width","isString","handleClose","args","e","emit","trigger","handleClosed","handleConfirm","_context$emit","call","handleCancel","handleOverlayClick","closeOnOverlayClick","calcBtn","btn","content","confirmBtnProps","_objectSpread","theme","cancelBtnProps","actionsBtnProps","_props2$actions","map","visible","showOverlay","overlayProps","preventScrollThrough","destroyOnClose","zIndex","closeBtn","renderTitleNode","titleNode","_createVNode","renderContentNode","contentNode","renderActionsNode","actionsNode","index","renderCancelBtnNode","cancelBtnNode","_resolveComponent","_mergeProps","renderConfirmBntNode","confirmBtnNode","default","_default","attrs","class","DialogPropsDefault","title","propsFn","create","options","isBrowser","root","document","createElement","body","appendChild","ref","propsObject","callFn","fnType","fn","params","reactive","onConfirm","onCancel","onOverlayClick","onClose","remove","onClosed","app","unmount","createApp","h","Dialog","mount","handler","destroy","nextTick","hide","show","update","key","includes","forEach","type","install","arguments","length","undefined","component","globalProperties","$dialog","provide","DialogPlugin"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAWA,IAAQA,SAAWC,MAAA,CAAXD;AACR,IAAME,iBAAUF,MAAA,EAAA,SAAA,CAAA,CAAA;AAEhB,aAAeG,eAAgB,CAAA;AAC7BD,EAAAA,IAAA,EAAAA,IAAA;AACAE,EAAAA,UAAY,EAAA;AAAEC,IAAAA,MAAQ,EAARA,MAAQ;AAAAC,IAAAA,OAAA,EAAAA,OAAA;AAASC,IAAAA,SAAU,EAAVA,SAAAA;GAAU;AACzCC,EAAAA,KAAA,EAAAA,KAAA;AACAC,EAAAA,OAAO,CAAC,gBAAA,EAAkB,WAAW,eAAiB,EAAA,QAAA,EAAU,SAAS,QAAQ,CAAA;AACjFC,EAAAA,KAAA,EAAAA,SAAAA,KAAAA,CAAMF,QAAOG,OAAS,EAAA;AACpB,IAAA,IAAMC,iBAAiBC,WAAY,EAAA,CAAA;AACnC,IAAA,IAAMC,gBAAgBC,UAAW,EAAA,CAAA;IACjC,IAAMC,cAAiB,GAAAC,QAAA,CAAS,YAAA;AAAA,MAAA,OAC9B,CAACT,MAAAA,KAAAA,IAAAA,IAAAA,MAAAA,uBAAAA,MAAAA,CAAOU,YAAYV,MAAO,KAAPA,IAAAA,IAAAA,MAAO,KAAPA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,MAAO,CAAAW,SAAA,CAAA,CAAAC,MAAA,CAAAC,kBAAA,CAAeb,CAAAA,MAAO,KAAA,IAAA,IAAPA,MAAO,KAAPA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,MAAO,CAAAc,OAAA,KAAW,EAAG,CAAA,CAAA,CAAEC,KAAK,UAACC,IAAA,EAAA;AAAA,QAAA,OAASC,IAAID,IAAM,EAAA,SAAS,MAAM,MAAM,CAAA;OAAA,CAAA,CAAA;AAAA,KACjH,CAAA,CAAA;IAEM,IAAAE,WAAA,GAAcT,SAAS,YAAA;AAAA,MAAA,OAAM,IAAAG,MAAA,CAC9BlB,IAAA,EAAA,UAAA,CAAA,EAAAyB,eAAA,CAAAA,eAAA,CAAAP,EAAAA,EAAAA,EAAAA,CAAAA,MAAA,CAEGlB,IAAyBM,EAAAA,kBAAAA,CAAAA,EAAAA,MAAAA,CAAMoB,YAAiB,KAAA,UAAA,CAAA,EAAA,EAAA,CAAAR,MAAA,CAChDlB,IAAA,EAAuBc,gBAAAA,CAAAA,EAAAA,cAAe,CAAAa,KAAA,IAASJ,IAAIjB,MAAM,CAAAc,OAAA,EAAS,QAAU,EAAA,CAAC,CAAM,KAAA,CAAA,CAE1F,CAAA,CAAA;KAAA,CAAA,CAAA;IAEK,IAAAQ,WAAA,GAAcb,SAAS,YAAA;AAAA,MAAA,OAAM,CAAAG,EAAAA,CAAAA,MAAA,CAC9BlB,IAAA,EAAAyB,UAAAA,CAAAA,EAAAA,eAAA,CAAAA,eAAA,CAAAP,EAAAA,EAAAA,EAAAA,CAAAA,MAAA,CAEGlB,IAAA,gBAAAkB,MAAA,CAAiBZ,MAAM,CAAAoB,YAAA,CAAA,EAAiB,CAACZ,cAAe,CAAAa,KAAA,CAAA,EAAA,EAAA,CAAAT,MAAA,CACxDlB,IAAA,EAAA,gBAAA,CAAA,EAAuBc,cAAe,CAAAa,KAAA,CAE7C,CAAA,CAAA;KAAA,CAAA,CAAA;IAEK,IAAAE,UAAA,GAAad,SAAS,YAAA;MAAA,OAAO;AACjCe,QAAAA,KAAA,EAAOC,SAASzB,MAAM,CAAAwB,KAAK,IAAIxB,MAAM,CAAAwB,KAAA,GAAAZ,EAAAA,CAAAA,MAAA,CAAWZ,MAAM,CAAAwB,KAAA,EAAA,IAAA,CAAA;OACtD,CAAA;AAAA,KAAA,CAAA,CAAA;AAEI,IAAA,IAAAE,WAAA,GAAc,SAAdA,WAAAA,CAAeC,IAA4B,EAAA;AACzC,MAAA,IAAEC,IAAMD,IAAA,CAANC;AACAzB,MAAAA,OAAA,CAAA0B,IAAA,CAAK,kBAAkB,KAAK,CAAA,CAAA;AACpC1B,MAAAA,OAAA,CAAQ0B,KAAK,OAAS,EAAA;AAAED,QAAAA,CAAG,EAAHA,CAAG;AAAAE,QAAAA,OAAA,EAAS,WAAA;AAAY,OAAC,CAAA,CAAA;KACnD,CAAA;AAEA,IAAA,IAAMC,eAAe,SAAfA,eAAqB;AACzB5B,MAAAA,OAAA,CAAQ0B,KAAK,QAAQ,CAAA,CAAA;KACvB,CAAA;AAEM,IAAA,IAAAG,aAAA,GAAgB,SAAhBA,aAAAA,CAAiBJ,CAAkB,EAAA;AAAA,MAAA,IAAAK,aAAA,CAAA;AAC/B9B,MAAAA,OAAA,CAAA0B,IAAA,CAAK,kBAAkB,KAAK,CAAA,CAAA;AACpC,MAAA,CAAAI,aAAA,GAAA9B,OAAA,CAAQ0B,IAAO,MAAAI,IAAAA,IAAAA,aAAA,KAAfA,KAAAA,CAAAA,IAAAA,aAAA,CAAAC,IAAA,CAAA/B,OAAA,EAAe,SAAA,EAAW;AAAEyB,QAAAA,CAAA,EAAAA,CAAAA;AAAE,OAAC,CAAA,CAAA;KACjC,CAAA;AAEM,IAAA,IAAAO,YAAA,GAAe,SAAfA,YAAAA,CAAgBP,CAAkB,EAAA;AAC9BzB,MAAAA,OAAA,CAAA0B,IAAA,CAAK,kBAAkB,KAAK,CAAA,CAAA;AACpC1B,MAAAA,OAAA,CAAQ0B,KAAK,OAAS,EAAA;AAAED,QAAAA,CAAG,EAAHA,CAAG;AAAAE,QAAAA,OAAA,EAAS,QAAA;AAAS,OAAC,CAAA,CAAA;AAC9C3B,MAAAA,OAAA,CAAQ0B,IAAK,CAAA,QAAA,EAAU;AAAED,QAAAA,CAAA,EAAAA,CAAAA;AAAE,OAAC,CAAA,CAAA;KAC9B,CAAA;AAEM,IAAA,IAAAQ,kBAAA,GAAqB,SAArBA,kBAAAA,CAAsBT,IAA4B,EAAA;AAChD,MAAA,IAAEC,IAAMD,IAAA,CAANC;AACJ,MAAA,IAAA,CAAC5B,OAAMqC,mBAAqB,EAAA;AAC9B,QAAA,OAAA;AACF,OAAA;AACQlC,MAAAA,OAAA,CAAA0B,IAAA,CAAK,kBAAkB,KAAK,CAAA,CAAA;AACpC1B,MAAAA,OAAA,CAAQ0B,KAAK,OAAS,EAAA;AAAED,QAAAA,CAAG,EAAHA,CAAG;AAAAE,QAAAA,OAAA,EAAS,SAAA;AAAU,OAAC,CAAA,CAAA;AAC/C3B,MAAAA,OAAA,CAAQ0B,IAAK,CAAA,eAAA,EAAiB;AAAED,QAAAA,CAAA,EAAAA,CAAAA;AAAE,OAAC,CAAA,CAAA;KACrC,CAAA;AAEM,IAAA,IAAAU,OAAA,GAAU,SAAVA,OAAAA,CAAWC,GAAc,EAAA;AAAA,MAAA,OAAAd,QAAA,CAASc,GAAG,CAAI,GAAA;AAAEC,QAAAA,OAAS,EAAAD,GAAAA;AAAI,OAAI,GAAAA,GAAA,CAAA;AAAA,KAAA,CAAA;IAC5D,IAAAE,eAAA,GAAkBhC,SAAS,YAAA;AAAA,MAAA,OAAAiC,eAAA,CAAA;AAC/BC,QAAAA,KAAO,EAAA,SAAA;AAAA,OAAA,EACJL,OAAQtC,CAAAA,MAAAA,CAAMU,UAAU,CAAA,CAAA,CAAA;AAAA,KAC3B,CAAA,CAAA;IACI,IAAAkC,cAAA,GAAiBnC,SAAsB,YAAA;AAAA,MAAA,OAAAiC,eAAA,CAAA;AAC3CC,QAAAA,KAAA,EAAOnC,cAAe,CAAAa,KAAA,GAAQ,SAAY,GAAA,OAAA;AAAA,OAAA,EACvCiB,OAAQtC,CAAAA,MAAAA,CAAMW,SAAS,CAAA,CAAA,CAAA;AAAA,KAC1B,CAAA,CAAA;IACI,IAAAkC,eAAA,GAAkBpC,QAAS,CAAA,YAAA;AAAA,MAAA,IAAAqC,eAAA,CAAA;AAAA,MAAA,OAAA,CAAAA,eAAA,GAAM9C,MAAM,CAAAc,OAAA,MAAA,IAAA,IAAAgC,eAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAN9C,eAAAA,CAAe+C,GAAI,CAAA,UAAC/B,IAAS,EAAA;QAAA,OAAAsB,OAAA,CAAQtB,IAAI,CAAC,CAAA;OAAC,CAAA,CAAA;KAAA,CAAA,CAAA;AAElF,IAAA,OAAO,YAAM;AACL,MAAA,IAAEgC,UACNhD,MAAAA,CADMgD;QAASC,WAAa,GAC5BjD,MAAAA,CADeiD,WAAa;QAAAC,YAAA,GAC5BlD,MAAAA,CAD4BkD,YAAA;QAAcC,uBAC1CnD,MAAAA,CAD0CmD;QAAsBC,cAAgB,GAChFpD,MAAAA,CADgEoD,cAAgB;QAAAC,MAAA,GAChFrD,MAAAA,CADgFqD,MAAA;QAAQC,QAAU,GAClGtD,MAAAA,CADwFsD,QAAU;QAAAxC,OAAA,GAClGd,MAAAA,CADkGc,OAAA,CAAA;AAEpG,MAAA,IAAMyC,kBAAkB,SAAlBA,kBAAwB;AACtB,QAAA,IAAAC,SAAA,GAAYpD,eAAe,OAAO,CAAA,CAAA;QACxC,IAAI,CAACoD,SAAW,EAAA;AACP,UAAA,OAAA,IAAA,CAAA;AACT,SAAA;AAEA,QAAA,OAAAC,WAAA,CAAA,KAAA,EAAA;UAAA,OAAA7C,EAAAA,EAAAA,CAAAA,MAAA,CAAsBlB,IAAA,EAAA,UAAA,CAAA;AAAA,SAAA,EAAA,CAAiB8D;OACzC,CAAA;AACA,MAAA,IAAME,oBAAoB,SAApBA,oBAA0B;AACxB,QAAA,IAAAC,WAAA,GAAcrD,aAAc,CAAA,SAAA,EAAW,SAAS,CAAA,CAAA;QACtD,IAAI,CAACqD,WAAa,EAAA;AACT,UAAA,OAAA,IAAA,CAAA;AACT,SAAA;AACA,QAAA,OAAAF,WAAA,CAAA,KAAA,EAAA;UAAA,OAAA7C,EAAAA,EAAAA,CAAAA,MAAA,CACiBlB,IACb,EAAA,QAAA,CAAA;AAAA,SAAA,EAAA,CAAA+D,WAAA,CAAA,KAAA,EAAA;UAAA,OAAA7C,EAAAA,EAAAA,CAAAA,MAAA,CAAelB,IAAA,EAAA,aAAA,CAAA;AAAA,SAAA,EAAA,CAAoBiE,WAAY,CAAA,CAAA,CAAA,CAAA,CAAA;OAGrD,CAAA;AACA,MAAA,IAAMC,oBAAoB,SAApBA,oBAA0B;AACxB,QAAA,IAAAC,WAAA,GAAczD,eAAe,SAAS,CAAA,CAAA;AACxC,QAAA,IAAAyD,WAAA,IAAehB,gBAAgBxB,KAAO,EAAA;UACxC,OAAOwB,gBAAgBxB,KAAM,CAAA0B,GAAA,CAAI,UAAC/B,IAAA,EAAM8C;;mBACvBA,EAAAA,KAAAA;AAAA,aAAA,EAAW9C;qBAAaM,EAAAA,WAAA,CAAYD,KAAO;cAAA,SAASc,EAAAA,YAAAA;;WACpE,CAAA,CAAA;AACH,SAAA;AACO,QAAA,OAAA,IAAA,CAAA;OACT,CAAA;AACA,MAAA,IAAM4B,sBAAsB,SAAtBA,sBAA4B;AAC1B,QAAA,IAAAC,aAAA,GAAgB5D,eAAe,WAAW,CAAA,CAAA;AAC5C,QAAA,IAAA,CAACU,WAAWkD,aAAe,EAAA;UACtB,OAAAP,WAAA,CAAAQ,gBAAA,CAAA,UAAA,CAAA,EAAAC,UAAA,CAActB,cAAe,CAAAvB,KAAA,EAAA;YAAA,OAAcC,EAAAA,WAAY,CAAAD,KAAA;YAAA,SAAgBc,EAAAA,YAAAA;AAAc,WAAA,CAAA,EAAA,IAAA,CAAA,CAAA;AAC9F,SAAA;AACO,QAAA,OAAA,IAAA,CAAA;OACT,CAAA;AAEA,MAAA,IAAMgC,uBAAuB,SAAvBA,uBAA6B;AAC3B,QAAA,IAAAC,cAAA,GAAiBhE,eAAe,YAAY,CAAA,CAAA;AAC9C,QAAA,IAAA,CAACU,WAAWsD,cAAgB,EAAA;UACvB,OAAAX,WAAA,CAAAQ,gBAAA,CAAA,UAAA,CAAA,EAAAC,UAAA,CAAczB,eAAgB,CAAApB,KAAA,EAAA;YAAA,OAAcC,EAAAA,WAAY,CAAAD,KAAA;YAAA,SAAgBW,EAAAA,aAAAA;AAAe,WAAA,CAAA,EAAA,IAAA,CAAA,CAAA;AAChG,SAAA;AACO,QAAA,OAAA,IAAA,CAAA;OACT,CAAA;MACA,OAAAyB,WAAA,CAAAQ,gBAAA,CAAA,SAAA,CAAA,EAAA;AAAA,QAAA,SAAA,EAEajB,OAAA;AAAA,QAAA,WAAA,EACC,QAAA;AAAA,QAAA,cAAA,EACIC,WAAA;AAAA,QAAA,eAAA,EACCC,YAAA;AAAA,QAAA,wBAAA,EACSC,oBAAA;AAAA,QAAA,kBAAA,EACNC,cAClB;AAAA,QAAA,SAAA,EAASC,MACT;AAAA,QAAA,SAAA,EAASjB,kBACT;QAAA,UAAUL,EAAAA,YAAAA;AAEV,OAAA,EAAA;AAAAsC,QAAAA,OAAA,WAAAC,QAAA,GAAA;AAAA,UAAA,OAAA,CAAAb,WAAA,CAAA,KAAA,EAAA;AAAA,YAAA,OAAA,EAAA,EAAA,CAAA7C,MAAA,CAAelB,IAAA,EAAA,GAAA,CAAA,CAAAkB,MAAA,CAAQT,OAAQ,CAAAoE,KAAA,CAAMC,KAAS,IAAA,EAAA,CAAA;AAAA,YAAA,OAAA,EAAajD,UAAW,CAAAF,KAAAA;AAAA,WAAA,EAAA,CACnEjB,eAAe,KAAK,CAAA,EACpBkD,QAAA,IAAAG,WAAA,CAAA,KAAA,EAAA;YAAA,OAAA7C,EAAAA,EAAAA,CAAAA,MAAA,CACgBlB,IACb,EAAA,aAAA,CAAA;WAAA+D,EAAAA,CAAAA,WAAA,CAAAQ,gBAAA,CAAA,YAAA,CAAA,EAAA;YAAA,SAAqBvC,EAAAA,WAAAA;AAAa,WAAA,EAAA,IAAA,CAAA,CAAA,CADnC,EAAA+B,WAAA,CAAA,KAAA,EAAA;YAAA,OAAA7C,EAAAA,EAAAA,CAAAA,MAAA,CAIYlB,IAAA,EAAA,WAAA,CAAA;AAAA,WAAA,EAAA,CACZ6D,eAAgB,EAAA,EAChBG,iBAAkB,EAAA,CAAA,CAAA,EAEpBtD,eAAe,QAAQ,CAAA,EAAAqD,WAAA,CAAA,KAAA,EAAA;AAAA,YAAA,OAAA,EACZvC,WAAY,CAAAG,KAAAA;WACrBuC,EAAAA,CAAAA,iBAAkB,EAAA,EAClBG,mBAAoB,EAAA,EACpBI,oBAAqB,EAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,SAAA;AAAA,OAAA,CAAA,CAAA;KAKhC,CAAA;AACF,GAAA;AACF,CAAC,CAAA;;;;AC9JM,IAAMM,kBAAqB,GAAA;AAChCC,EAAAA,KAAO,EAAA,EAAA;AACPlC,EAAAA,OAAS,EAAA,EAAA;AACT9B,EAAAA,UAAY,EAAA,EAAA;AACZC,EAAAA,SAAW,EAAA,EAAA;AACXqC,EAAAA,OAAS,EAAA,KAAA;AACTK,EAAAA,MAAQ,EAAA,IAAA;AACRJ,EAAAA,WAAa,EAAA,IAAA;AACbzB,EAAAA,KAAO,EAAA,OAAA;AACPa,EAAAA,mBAAqB,EAAA,KAAA;AACvB,EAAA;AAEA,IAAMsC,UAAU,CAAC,WAAA,EAAa,UAAY,EAAA,gBAAA,EAAkB,WAAW,UAAU,CAAA,CAAA;AAGjF,SAASC,OAAOC,OAA0D,EAAA;EACxE,IAAI,CAACC,SAAA,EAAW,OAAA;AAEV,EAAA,IAAAC,IAAA,GAAOC,QAAS,CAAAC,aAAA,CAAc,KAAK,CAAA,CAAA;AAChCD,EAAAA,QAAA,CAAAE,IAAA,CAAKC,YAAYJ,IAAI,CAAA,CAAA;AAExB,EAAA,IAAA/E,KAAA,GAAQoF,GAA4B,CAAA,EAAE,CAAA,CAAA;AAC5C,EAAA,IAAMC,WAAc,GAAA3C,aAAA,CAAAA,aAAA,CAAA,EAAA,EACf+B,kBAAA,CAAA,EACC,OAAOI,OAAA,KAAY,WAAW;AAAErC,IAAAA,OAAA,EAASqC,OAAAA;GAAY,GAAAA,OAAA,CAC3D,CAAA;AAES,EAAA,SAAAS,MAAAA,CAAUC,QAA2BpF,OAAmB,EAAA;AAC/D,IAAA,IAAMqF,EAAK,GAAAxF,KAAA,CAAMqB,KAAM,CAAAkE,MAAA,CAAA,IAAWF,WAAY,CAAAE,MAAA,CAAA,CAAA;AACvC,IAAA,OAAAC,EAAA,KAAO,UAAc,IAAAA,EAAA,CAAGrF,OAAc,CAAA,CAAA;AAC/C,GAAA;EAEA,IAAMsF,SAASC,QAAS,CAAAhD,aAAA,CAAAA,aAAA,KACnB2C,WAAA,CAAA,EAAA,EAAA,EAAA;AACHM,IAAAA,SAAA,EAAW,SAAAA,SAACxF,CAAAA,OAA+B,EAAA;AACzCmF,MAAAA,MAAA,CAAO,aAAanF,OAAO,CAAA,CAAA;MAC3BsF,MAAA,CAAOzC,OAAU,GAAA,KAAA,CAAA;KACnB;AACA4C,IAAAA,QAAA,EAAU,SAAAA,QAACzF,CAAAA,OAA+B,EAAA;AACxCmF,MAAAA,MAAA,CAAO,YAAYnF,OAAO,CAAA,CAAA;MAC1BsF,MAAA,CAAOzC,OAAU,GAAA,KAAA,CAAA;KACnB;AACA6C,IAAAA,cAAA,EAAgB,SAAAA,cAAC1F,CAAAA,OAA+B,EAAA;AAC9CmF,MAAAA,MAAA,CAAO,kBAAkBnF,OAAO,CAAA,CAAA;MAChCsF,MAAA,CAAOzC,OAAU,GAAA,KAAA,CAAA;KACnB;AACA8C,IAAAA,OAAA,EAAS,SAAAA,OAAC3F,CAAAA,OAAgC,EAAA;AACxCmF,MAAAA,MAAA,CAAO,WAAWnF,OAAO,CAAA,CAAA;MACzB4E,IAAA,CAAKgB,MAAO,EAAA,CAAA;KACd;IACAC,UAAU,SAAAA,QAAAA,GAAM;MACdV,MAAA,CAAO,UAAU,CAAA,CAAA;AAEVG,MAAAA,MAAA,CAAArC,cAAA,IAAkB6C,IAAIC,OAAQ,EAAA,CAAA;AACvC,KAAA;AAAA,GAAA,CACD,CAAA,CAAA;EAED,IAAMD,MAAME,SAAU,CAAA,YAAA;AAAA,IAAA,OAAMC,CAAE,CAAAC,MAAA,EAAQZ,MAAM,CAAC,CAAA;GAAA,CAAA,CAAA;AAC7CQ,EAAAA,GAAA,CAAIK,MAAMvB,IAAI,CAAA,CAAA;AAEd,EAAA,IAAMwB,OAAU,GAAA;IACdC,OAAU,EAAA,SAAAA,UAAA;MACRf,MAAA,CAAOrC,cAAiB,GAAA,IAAA,CAAA;AACxBqD,MAAAA,QAAA,CAAS,YAAM;QACbhB,MAAA,CAAOzC,OAAU,GAAA,KAAA,CAAA;QACjB+B,IAAA,CAAKgB,MAAO,EAAA,CAAA;AACd,OAAC,CAAA,CAAA;KACH;IACAW,IAAO,EAAA,SAAAA,OAAA;MACLjB,MAAA,CAAOzC,OAAU,GAAA,KAAA,CAAA;KACnB;IACA2D,IAAO,EAAA,SAAAA,OAAA;MACLlB,MAAA,CAAOzC,OAAU,GAAA,IAAA,CAAA;KACnB;IACA4D,uBAAO/B,CAAAA,QAA0C,EAAA;AAC3C,MAAA,IAAA,OAAOA,aAAY,QAAU,EAAA;QAC/BY,MAAA,CAAOjD,OAAUqC,GAAAA,QAAAA,CAAAA;AACnB,OAAO,MAAA;AACL,QAAA,KAAA,IAAWgC,OAAOhC,QAAS,EAAA;AACrB,UAAA,IAAAF,OAAA,CAAQmC,QAAS,CAAAD,GAAwB,CAAG,EAAA;YACxC7G,KAAA,CAAAqB,KAAA,CAAMwF,OAAOhC,QAAQ,CAAAgC,GAAA,CAAA,CAAA;AAC7B,WAAO,MAAA;AACLpB,YAAAA,MAAA,CAAOoB,OAAOhC,QAAQ,CAAAgC,GAAA,CAAA,CAAA;AACxB,WAAA;AACF,SAAA;AACF,OAAA;AACF,KAAA;GACF,CAAA;AAESJ,EAAAA,QAAA,CAAA,YAAA;AAAA,IAAA,OAAOhB,MAAO,CAAAzC,OAAA,GAAU,IAAK,CAAA;GAAA,CAAA,CAAA;AAE/B,EAAA,OAAAuD,OAAA,CAAA;AACT,CAAA;AAEC,CAAC,QAAQ,OAAS,EAAA,SAAS,CAAmB,CAAAQ,OAAA,CAAQ,UAACC,IAA2B,EAAA;AAC1EX,EAAAA,MAAA,CAAAW,IAAA,CAAA,GAAQ,UAACnC,OAA6D,EAAA;AACvE,IAAA,IAAA7E,KAAA,GAAa;AAAEwC,MAAAA,OAAA,EAAS,EAAA;KAAG,CAAA;AAE3B,IAAA,IAAA,OAAOqC,YAAY,QAAU,EAAA;MAC/B7E,KAAA,CAAMwC,OAAU,GAAAqC,OAAA,CAAA;AAClB,KAAO,MAAA;MACL7E,KAAA,GAAA0C,aAAA,CAAAA,aAAA,KAAa1C,KAAO,CAAA,EAAG6E,OAAQ,CAAA,CAAA;AACjC,KAAA;IAEA,IAAImC,SAAS,OAAS,EAAA;MACpBhH,KAAA,CAAMW,SAAY,GAAA,IAAA,CAAA;AACpB,KAAA;IAEA,OAAOiE,OAAO5E,KAAK,CAAA,CAAA;GACrB,CAAA;AACF,CAAC,CAAA,CAAA;AAEDqG,MAAA,CAAOY,OAAU,GAAA,UAAChB,GAAU,EAAc;AAAA,EAAA,IAAdvG,IAAA,GAAAwH,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAO,EAAO,CAAA;EACxCjB,GAAA,CAAIoB,SAAU,CAAA3H,IAAA,IAAQ2G,MAAO,CAAA3G,IAAA,EAAM2G,MAAM,CAAA,CAAA;AAGrCJ,EAAAA,GAAA,CAAAxG,MAAA,CAAO6H,iBAAiBC,OAAU,GAAAlB,MAAA,CAAA;AAClCJ,EAAAA,GAAA,CAAAuB,OAAA,CAAQ,WAAWnB,MAAM,CAAA,CAAA;AAC/B,CAAA,CAAA;AAWO,IAAMoB,YAA2D,GAAApB;;;;"}